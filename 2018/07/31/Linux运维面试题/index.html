<!-- build time:Tue Jul 31 2018 23:58:52 GMT+0800 (CST) --><!DOCTYPE html><html class="theme-next mist use-motion" lang="zh-CN"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css"><link href="/css/main.css?v=6.3.0" rel="stylesheet" type="text/css"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.3.0"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=6.3.0"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=6.3.0"><link rel="mask-icon" href="/images/logo.svg?v=6.3.0" color="#222"><script type="text/javascript" id="hexo.configurations">var NexT=window.NexT||{},CONFIG={root:"/",scheme:"Mist",version:"6.3.0",sidebar:{position:"left",display:"post",offset:12,b2t:!1,scrollpercent:!1,onmobile:!1},fancybox:!1,fastclick:!1,lazyload:!1,tabs:!0,motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},algolia:{applicationID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}}}</script><meta name="description" content="1、解释top命令和vmstat命令top命令用来的监控linux系统的状况，比如系统持续运行时间、登录的用户数、负载状况，cpu和内存及swap使用状况，还有个进程任务的动态监控。vmstat可以展现给定时间间隔的服务器的状态值,包括服务器的CPU使用率，内存和虚拟内存交换情况,磁盘IO读写情况[root@localhost ~]# vmstat 2 12表示每个两秒采集一次服务器状态，1表示只"><meta name="keywords" content="面试题"><meta property="og:type" content="article"><meta property="og:title" content="linux运维面试题"><meta property="og:url" content="http://www.python100.com/2018/07/31/Linux运维面试题/index.html"><meta property="og:site_name" content="乘风破浪"><meta property="og:description" content="1、解释top命令和vmstat命令top命令用来的监控linux系统的状况，比如系统持续运行时间、登录的用户数、负载状况，cpu和内存及swap使用状况，还有个进程任务的动态监控。vmstat可以展现给定时间间隔的服务器的状态值,包括服务器的CPU使用率，内存和虚拟内存交换情况,磁盘IO读写情况[root@localhost ~]# vmstat 2 12表示每个两秒采集一次服务器状态，1表示只"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2018-07-31T15:50:53.147Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="linux运维面试题"><meta name="twitter:description" content="1、解释top命令和vmstat命令top命令用来的监控linux系统的状况，比如系统持续运行时间、登录的用户数、负载状况，cpu和内存及swap使用状况，还有个进程任务的动态监控。vmstat可以展现给定时间间隔的服务器的状态值,包括服务器的CPU使用率，内存和虚拟内存交换情况,磁盘IO读写情况[root@localhost ~]# vmstat 2 12表示每个两秒采集一次服务器状态，1表示只"><link rel="alternate" href="/atom.xml" title="乘风破浪" type="application/atom+xml"><link rel="canonical" href="http://www.python100.com/2018/07/31/Linux运维面试题/"><script type="text/javascript" id="page.configurations">CONFIG.page={sidebar:""}</script><title>linux运维面试题 | 乘风破浪</title><noscript><style type="text/css">.sidebar-inner,.use-motion .brand,.use-motion .collection-title,.use-motion .comments,.use-motion .menu-item,.use-motion .motion-element,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .logo,.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}</style></noscript></head><body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN"><div class="container sidebar-position-left page-post-detail"><div class="headband"></div><a href="https://chenmaoqing.github.io" class="github-corner" aria-label="View source on Github"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#64CEAA;color:#fff;position:absolute;top:0;border:0;right:0" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style><header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-wrapper"><div class="site-meta"><div class="custom-logo-site-title"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">乘风破浪</span> <span class="logo-line-after"><i></i></span></a></div></div><div class="site-nav-toggle"><button aria-label="切换导航栏"><span class="btn-bar"></span> <span class="btn-bar"></span> <span class="btn-bar"></span></button></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-主页"></i><br>首页</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-标签"></i><br>标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-分类"></i><br>分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-归档"></i><br>归档</a></li><li class="menu-item menu-item-about"><a href="/About/" rel="section"><i class="menu-item-icon fa fa-fw fa-about"></i><br>关于</a></li><li class="menu-item menu-item-commonweal"><a href="/404公益/" rel="section"><i class="menu-item-icon fa fa-fw fa-公益404"></i><br>公益 404</a></li><li class="menu-item menu-item-search"><a href="javascript:;" class="popup-trigger"><i class="menu-item-icon fa fa-search fa-fw"></i><br>搜索</a></li></ul><div class="site-search"><div class="popup search-popup local-search-popup"><div class="local-search-header clearfix"><span class="search-icon"><i class="fa fa-search"></i> </span><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span><div class="local-search-input-wrapper"><input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input"></div></div><div id="local-search-result"></div></div></div></nav></div></header><main id="main" class="main"><div class="main-inner"><div class="content-wrap"><div id="content" class="content"><div id="posts" class="posts-expand"><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="http://www.python100.com/2018/07/31/Linux运维面试题/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="chen"><meta itemprop="description" content=""><meta itemprop="image" content="/images/avatar.gif"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="乘风破浪"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">linux运维面试题</h1><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2018-07-31 23:27:00 / 修改时间：23:50:53" itemprop="dateCreated datePublished" datetime="2018-07-31T23:27:00+08:00">2018-07-31</time> </span><span class="post-category"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/面试题/" itemprop="url" rel="index"><span itemprop="name">面试题</span></a></span></span></div></header><div class="post-body" itemprop="articleBody"><hr><p>1、<strong>解释top命令和vmstat命令</strong></p><p><strong>top命令用来的监控linux系统的状况，比如系统持续运行时间、登录的用户数、负载状况，</strong></p><p><strong>cpu和内存及swap使用状况，还有个进程任务的动态监控。</strong></p><p>vmstat可以展现给定时间间隔的服务器的状态值,包括服务器的CPU使用率，内存和虚拟内存交换情况,磁盘IO读写情况</p><p>[root@localhost ~]# vmstat 2 1</p><p>2表示每个两秒采集一次服务器状态，1表示只采集一次。</p><p><strong>iostat是对系统磁盘IO操作进行监控，它的输出主要显示磁盘的读写操作的统计信息。同时给出cpu的使用情况</strong></p><p>mpstat可以监控到cpu的一些统计信息，在多核cpu的系统里不但能够查看所有cpu的平均状况信息，</p><p>而且能够查看特定的cpu的信息。</p><p>sar命令可以全名的获取到cpu 、运行、磁盘IO、虚拟内存、内存、网络等信息。</p><p>netstat 命令用于显示本机网络链接、运行端口、路由表等信息</p><p>ps命令是进程查看命令，使用这个命令可以确定有哪些进程正在运行和运行的状态、进程是否结束、进程有没有僵死、</p><p>哪些进程占用了过多的资源等。</p><p>lsof的原始功能是列出打开的文件的进程</p><h3 id="2、请写出iptables语句"><a href="#2、请写出iptables语句" class="headerlink" title="2、请写出iptables语句"></a>2、<strong>请写出iptables语句</strong></h3><p>1）本地80端口的请求转发到8080端口，当前主机IP为192.168.2.1</p><p>iptables -t nat -A PREROUTING -d 192.168.2.1 -p tcp -dport 80 -j DNAT -to 192.168.2.1:8080</p><p>2）允许本机对外连接80端口（本机能连外界服务器为80）</p><p>iptables -A OUTPUT -p tcp –dport 80 -j ACCEPT</p><p>3）开放本机的3306端口,22端口</p><p>iptables -A INPUT -p tcp –dport 3306 -j ACCEPT</p><p>4）禁止外界ping本服务器</p><p>iptables -A INPUT -p icmp -j DROP</p><p>5）防止SYN攻击（轻量级预防）</p><p>iptables -A FORWARD -p tcp –syn -m limit –limit 1/s -j ACCEPT</p><p>iptables -A FORWARD -p tcp –tcp-flags SYN,ACK,FIN,RST RST -m limit –limit 1/s -j ACCEPT</p><p>6)iptables -L -n</p><h3 id="3、Mysql高可用方案有哪些？Mysql备份方案有哪些？有什么缺点"><a href="#3、Mysql高可用方案有哪些？Mysql备份方案有哪些？有什么缺点" class="headerlink" title="3、Mysql高可用方案有哪些？Mysql备份方案有哪些？有什么缺点"></a>3、<strong>Mysql高可用方案有哪些？Mysql备份方案有哪些？有什么缺点</strong></h3><p>Mysql数据库高可用主要解决：万一数据库发生了宕机或者意外中断等故障，能尽快恢复数据库的可用性，尽可能的减少停机时间，</p><p>保证业务不会因为数据库的故障而中断</p><p>用作备份、只读副本等功能的非主节点的数据和主节点的数据实时或者最终保持一致。</p><p>当业务发生数据库切换时，切换前后的数据库内容应当一致，不会英文数据缺失或者数据不一致而影响业务。</p><h3 id="方案一：主从或者主主半同步复制"><a href="#方案一：主从或者主主半同步复制" class="headerlink" title="方案一：主从或者主主半同步复制"></a><strong>方案一：主从或者主主半同步复制</strong></h3><p>通常使用proxy、keepalived等第三方软件配合双节点数据库，搭建单向或者双向的半同步复制。</p><p>优点：1、结构简单，使用原生半同步复制作为数据同步的依据</p><p>​ 2、双节点，需求资源少，部署简单，没有主机宕机后的选主问题，直接切换。</p><p>缺点：完全依赖半同步复制，如果半同步复制退化为异步复制，数据一致性无法得到保障，需要额外考虑高可用机制</p><h3 id="方案二：半同步复制优化"><a href="#方案二：半同步复制优化" class="headerlink" title="方案二：半同步复制优化"></a><strong>方案二：半同步复制优化</strong></h3><p>半同步复制机制是可靠的，如果半同步复制 一致是生效的，那么便可以认为数据时一致的。但是由于网络波动等一些客观原因，</p><p>导致半同步复制发生超时而切换为异步复制，那么便不能保证数据的一致性。所以尽可能的保证半同步复制，便可提高数据一</p><p>致性。该方案也是使用双节点架构，在原有半同步复制的基础上做了功能上的优化，使得半同步复制的机制变得更可靠。</p><h3 id="优化方案三：双通道复制"><a href="#优化方案三：双通道复制" class="headerlink" title="优化方案三：双通道复制"></a>优化方案三：双通道复制</h3><h5 id="1、双通道复制"><a href="#1、双通道复制" class="headerlink" title="1、双通道复制"></a>1、双通道复制</h5><p>半同步复制由于发生超时后，复制断开，当再次建立起复制时，同时建立两条通道，其中一条半同步复制通道从当前</p><p>位置开始复制，保证从机知道当前主机执行的进度。另外一条异步复制通道开始追补从机落后的数据。当异步复制通</p><p>道追赶到半同步复制的起始位置时，恢复半同步复制。</p><h5 id="2、binlog文件服务器"><a href="#2、binlog文件服务器" class="headerlink" title="2、binlog文件服务器"></a>2、binlog文件服务器</h5><p>搭建两条半同步复制通道，其中连接文件服务器的半同步通道正常情况下不启用，当主从的半同步复制发生网络问题</p><p>退化后，启动与文件服务器的半同步复制通道。当主从半同步复制恢复后，关闭与文件服务器的半同步复制通道。</p><p>优点：双节点，需求资源少，部署简单，架构简单，没有选主问题，可直接切换，相比原生复制，优化后的半同步</p><p>复制更能保证数据的一致性。</p><p>缺点：需要修改内核源码或者使用mysql通信协议，需要对源码有一定的理解，并能做到一定程度的二次开发。</p><p>​ 依旧依赖半同步复制，没有从根本上解决数据一致性问题。</p><h3 id="方案四：高可用架构优化"><a href="#方案四：高可用架构优化" class="headerlink" title="方案四：高可用架构优化"></a><strong>方案四：高可用架构优化</strong></h3><p>​ 将双节点数据库扩展到多节点数据库，或者多节点数据库集群。可以根据自己的需要选择一主两从，一主多从或者多主多从集群</p><h5 id="常见方案：1、MHA-多节点集群"><a href="#常见方案：1、MHA-多节点集群" class="headerlink" title="常见方案：1、MHA+多节点集群"></a>常见方案：1、MHA+多节点集群</h5><p>MHA Manager会定时探测集群中的master节点，当master出现故障时，它可以自动将最新数据的slave提升为新的</p><p>master，然后将所有其他的slave重新指向新的master，整个故障转移过程对应用程序完全透明。</p><p>MHA Node运行在每台MySQL服务器上，主要作用是切换时处理二进制日志，确保切换尽量少丢数据。</p><p>优点：</p><p>可以进行故障的自动检测和转移;</p><p>可扩展性较好，可以根据需要扩展MySQL的节点数量和结构;</p><p>相比于双节点的MySQL复制，三节点/多节点的MySQL发生不可用的概率更低</p><p>缺点：</p><p>至少需要三节点，相对于双节点需要更多的资源;</p><p>逻辑较为复杂，发生故障后排查问题，定位问题更加困难;</p><p>数据一致性仍然靠原生半同步复制保证，仍然存在数据不一致的风险;</p><p>可能因为网络分区发生脑裂现象;</p><h5 id="常见方案：2、zookeeper-proxy"><a href="#常见方案：2、zookeeper-proxy" class="headerlink" title="常见方案：2、zookeeper+proxy"></a>常见方案：2、zookeeper+proxy</h5><p>Zookeeper使用分布式算法保证集群数据的一致性，使用zookeeper可以有效的保证proxy的高可用性，可以较</p><p>好的避免网络分区现象的产生。</p><p>优点：</p><p>较好的保证了整个系统的高可用性，包括proxy、MySQL;</p><p>扩展性较好，可以扩展为大规模集群;</p><p>缺点：</p><p>数据一致性仍然依赖于原生的mysql半同步复制;</p><p>引入zk，整个系统的逻辑变得更加复杂;</p><h3 id="方案五：共享存储"><a href="#方案五：共享存储" class="headerlink" title="方案五：共享存储"></a><strong>方案五：共享存储</strong></h3><p>共享存储实现了数据库服务器和存储设备的解耦，不同数据库之间的数据同步不再依赖于MySQL的原生复制功能，而是通过</p><p>磁盘数据同步的手段，来保证数据的一致性。</p><h5 id="1-SAN共享储存"><a href="#1-SAN共享储存" class="headerlink" title="(1) SAN共享储存"></a>(1) SAN共享储存</h5><p>SAN的概念是允许存储设备和处理器(服务器)之间建立直接的高速网络连接，通过这种连接实现数据的集中式存储。</p><p>使用共享存储时，MySQL服务器能够正常挂载文件系统并操作，如果主库发生宕机，备库可以挂载相同的文件系统，保证主库、</p><p>和备库使用相同的数据。</p><p>优点：</p><p>两节点即可，部署简单，切换逻辑简单;</p><p>很好的保证数据的强一致性;</p><p>不会因为MySQL的逻辑错误发生数据不一致的情况;</p><p>缺点：</p><p>需要考虑共享存储的高可用;</p><p>价格昂贵;</p><h5 id="2-DRBD磁盘复制"><a href="#2-DRBD磁盘复制" class="headerlink" title="(2) DRBD磁盘复制"></a>(2) DRBD磁盘复制</h5><p>DRBD是一种基于软件、基于网络的块复制存储解决方案，主要用于对服务器之间的磁盘、分区、逻辑卷等进行数据镜像，当用户将数据写入本地磁盘时，还会将数据发送到网络中另一台主机的磁盘上，这样的本地主机(主节点)与远程主机(备节点)的数据就可以保证实时同步。</p><p>当本地主机出现问题，远程主机上还保留着一份相同的数据，可以继续使用，保证了数据的安全。</p><p>DRBD是linux内核模块实现的快级别的同步复制技术，可以与SAN达到相同的共享存储效果。</p><p>优点：</p><p>两节点即可，部署简单，切换逻辑简单;</p><p>相比于SAN储存网络，价格低廉;</p><p>保证数据的强一致性;</p><p>缺点：</p><p>对io性能影响较大;</p><p>从库不提供读操作;</p><h3 id="方案六：-分布式协议"><a href="#方案六：-分布式协议" class="headerlink" title="方案六：** 分布式协议**"></a><strong>方案六：**</strong> 分布式协议**</h3><p>分布式协议可以很好解决数据一致性问题。比较常见的方案如下：</p><h5 id="1-MySQL-cluster"><a href="#1-MySQL-cluster" class="headerlink" title="(1) MySQL cluster"></a>(1) MySQL cluster</h5><p>MySQL cluster是官方集群的部署方案，通过使用NDB存储引擎实时备份冗余数据，实现数据库的高可用性和数据一致性。</p><p>优点：</p><p>全部使用官方组件，不依赖于第三方软件;</p><p>可以实现数据的强一致性;</p><p>缺点：</p><p>国内使用的较少;</p><p>配置较复杂，需要使用NDB储存引擎，与MySQL常规引擎存在一定差异;</p><p>至少三节点;</p><h5 id="2-Galera"><a href="#2-Galera" class="headerlink" title="(2) Galera"></a>(2) Galera</h5><p>基于Galera的MySQL高可用集群， 是多主数据同步的MySQL集群解决方案，使用简单，没有单点故障，可用性高。</p><p>优点：</p><p>多主写入，无延迟复制，能保证数据强一致性;</p><p>有成熟的社区，有互联网公司在大规模的使用;</p><p>自动故障转移，自动添加、剔除节点;</p><p>缺点：</p><p>需要为原生MySQL节点打wsrep补丁</p><p>只支持innodb储存引擎</p><p>至少三节点;</p><h5 id="3-POAXS"><a href="#3-POAXS" class="headerlink" title="(3) POAXS"></a>(3) POAXS</h5><p>Paxos 算法解决的问题是一个分布式系统如何就某个值(决议)达成一致。这个算法被认为是同类算法中最有效的。Paxos与</p><p>MySQL相结合可以实现在分布式的MySQL数据的强一致性。</p><p>优点：</p><p>多主写入，无延迟复制，能保证数据强一致性;</p><p>有成熟理论基础;</p><p>自动故障转移，自动添加、剔除节点;</p><p>缺点：</p><p>只支持innodb储存引擎</p><p>随着官方MySQL Group Replication的GA，使用分布式协议来解决数据一致性问题已经成为了主流的方向。</p><p>一系列成熟的产品如PhxSQL、MariaDB Galera Cluster、Percona XtraDB Cluster等越来越多的被大规模使用。</p><h3 id="4、写出apache2-x的两种工作模式，以及各自的工作原理。如何查看apache当前支持的模块。并查看再哪种模式下工作。"><a href="#4、写出apache2-x的两种工作模式，以及各自的工作原理。如何查看apache当前支持的模块。并查看再哪种模式下工作。" class="headerlink" title="4、写出apache2.x的两种工作模式，以及各自的工作原理。如何查看apache当前支持的模块。并查看再哪种模式下工作。"></a>4、<strong>写出apache2.x的两种工作模式，以及各自的工作原理。如何查看apache当前支持的模块。并查看再哪种模式下工作。</strong></h3><p><strong>prefork(多进程，每个进程产生子进程)和worker（多进程，每个进程生成多个线程)两种模式。</strong><br><strong>prefork 的工作原理</strong>是，控制进程在最初建立“StartServers”个子进程后，为了满足MinSpareServers 设置的需要创建一个进程，等待一秒钟，继续创建两个，再等待一秒钟，继续创建四个……如此按指数级增加创建的进程数，最多达到每秒32 个，直到满足MinSpareServers 设置的值为止。这就是预派生（prefork）的由来。这种模式可以不必在请求到来时再产生新的进程，从而减小了系统开销以增加性能。<br><strong>worker 是2.0 版中全新的支持多线程和多进程混合模型的MPM</strong>。由于使用线程来处理，所以可以处理相对海量的请求，而系统资源的开销要小于基于进程的服务器。但是，worker 也使用了多进程，每个进程又生成多个线程，以获得基于进程服务器的稳定性。这种MPM 的工作方式将是Apache 2.0 的发展趋势。可以通过命令httpd -l 可以查看apache 当前的模块，如果带有worker.c 就是工作在worker 模式下，如果有prefork.c 就是工作在prefork.c 的模式下。</p><h3 id="5、Linux基础问题："><a href="#5、Linux基础问题：" class="headerlink" title="5、Linux基础问题："></a>5、<strong>Linux基础问题：</strong></h3><p><strong>1）linux怎么查看用户登录日志</strong></p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">who		/var/log/wtmp	   cat	/var/log/secure</span><br></pre></td></tr></table></figure><p><strong>2）Linux中utmp，wtmp，lastlog，message各个文件的作用</strong></p><p>有关当前登录用户信息记录在utmp中；使用who命令</p><p>用户登录进入和退出记录在文件wtmp中；使用w命令</p><p>用户最后一次登录的文件可以使用lastlog查看；</p><p>messages=======从syslog中记录信息</p><p><strong>3）列举你熟悉的服务器区性能查看命令</strong></p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">查看磁盘	df -h</span><br><span class="line">查看内存大小	free	 vmstat</span><br><span class="line">只查看cpu	cat /proc/cupinfo</span><br><span class="line">只查看cpu数量	grep “model name” /proc/cpuinfo|wc -l</span><br><span class="line">只查看系统内存	cat /proc/meminfo</span><br><span class="line">查看每个进程的情况	cat /proc/<span class="number">5346</span>/status	</span><br><span class="line">查看负载	w</span><br><span class="line">查看系统整体状态 top</span><br></pre></td></tr></table></figure><p>4）<strong>服务器间怎么实现无密码登录。列举操作步骤</strong></p><p>ssh-keygen #生成本地私钥，一路Enter即可</p><p>ssh-copy-id <a href="mailto:root@192.168.1.137" target="_blank" rel="noopener">root@192.168.1.137</a> #上传本地私钥到目标服务器137</p><p>ssh <a href="mailto:root@192.168.1.137" target="_blank" rel="noopener">root@192.168.1.137</a> #免密码登陆服务器137</p><p><strong>5）Netstat的常用用法</strong></p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">netstat -a   列出所有当前的连接</span><br><span class="line"></span><br><span class="line">netstat -at	使用 -t 选项列出 TCP 协议的连接</span><br><span class="line"></span><br><span class="line">netstat -au	使用 -u 选项列出 UDP 协议的连接</span><br><span class="line"></span><br><span class="line">netstat -ant 使用 -n 选项禁用域名解析功能,也就是只显示ip,不显示主机名</span><br><span class="line"></span><br><span class="line">netstat -tnl  使用 -l 选项列出正在监听的套接字连接</span><br><span class="line"></span><br><span class="line">netstat -nlpt 使用 -p 选项查看进程信息</span><br><span class="line"></span><br><span class="line">netstat -ltpe  使用 -ep 选项可以同时查看进程名和用户名</span><br><span class="line"></span><br><span class="line">netstat -s 列出所有网络包的统计情况，netstat 可以打印出网络统计数据，包括某个协议下的收发包数量</span><br><span class="line"></span><br><span class="line">netstat -rn 使用 -r 选项打印内核路由信息。打印出来的信息与 route 命令输出的信息一样。</span><br><span class="line"></span><br><span class="line">netstat -ie  netstat 也能打印网络接口信息，-i 选项就是为这个功能而生，也就是相对于ifconfig</span><br><span class="line"></span><br><span class="line">netstat -ct	这个命令可持续输出 TCP 协议信息， -c 选项持续输出信息</span><br><span class="line"></span><br><span class="line">netstat -nat |awk <span class="string">'&#123;print $6&#125;'</span>|sort|uniq -c	查看TCP各种状态列表</span><br><span class="line"></span><br><span class="line">netstat -atnp | grep ESTA</span><br><span class="line"></span><br><span class="line">	active 状态的套接字连接用 <span class="string">"ESTABLISHED"</span> 字段表示，所以我们可以使用 grep 命令获得 active 状态的连接</span><br><span class="line"></span><br><span class="line">查看连接某服务端口最多的的IP地址</span><br><span class="line"></span><br><span class="line">netstat -nat | grep <span class="string">"192.168.1.15:22"</span> |awk <span class="string">'&#123;print  $5&#125;'</span>|awk -F: <span class="string">'&#123;print $1&#125;'</span>|sort|uniq -c|sort -nr|head -<span class="number">20</span></span><br></pre></td></tr></table></figure><h3 id="6、软件类问题"><a href="#6、软件类问题" class="headerlink" title="6、软件类问题"></a><strong>6、软件类问题</strong></h3><h3 id="keepalived和heartbeat的优缺点，适合哪些场合"><a href="#keepalived和heartbeat的优缺点，适合哪些场合" class="headerlink" title="keepalived和heartbeat的优缺点，适合哪些场合"></a><strong>keepalived和heartbeat的优缺点，适合哪些场合</strong></h3><p>Keepalived使用的vrrp协议方式，虚拟路由冗余协议 (Virtual Router Redundancy Protocol，简称VRRP)；<br>Heartbeat是基于主机或网络的服务的高可用方式；<br>keepalived的目的是模拟路由器的双机<br>heartbeat的目的是用户service的双机<br>lvs的高可用建议用keepavlived<br>业务的高可用用heartbeat</p><p>1）Keepalived使用更简单：从安装、配置、使用、维护等角度上对比，Keepalived都比Heartbeat要简单得多，尤其是</p><p>Heartbeat 2.1.4后拆分成3个子项目，安装、配置、使用都比较复杂，尤其是出问题的时候，都不知道具体是哪个子系</p><p>统出问题了；而Keepalived只有1个安装文件、1个配置文件，配置文件也简单很多；</p><p>2）Heartbeat功能更强大：Heartbeat虽然复杂，但功能更强大，配套工具更全，适合做大型集群管理，而Keepalived主</p><p>要用于集群倒换，基本没有管理功能；</p><p>3）协议不同：Keepalived使用VRRP协议进行通信和选举，Heartbeat使用心跳进行通信和选举；Heartbeat除了走网络</p><pre><code>外，还可以通过串口通信，貌似更可靠；
</code></pre><p>4）使用方式基本类似：如果要基于两者设计高可用方案，最终都要根据业务需要写自定义的脚本，Keepalived的脚本没有任</p><p>何约束，随便怎么写都可以；Heartbeat的脚本有约束，即要支持service start/stop/restart这种方式，而且Heartbeart</p><p>提供了很多默认脚本，简单的绑定ip，启动apache等操作都已经有了；</p><p><strong>使用建议：优先使用Keepalived，当Keepalived不够用的时候才选择Heartbeat</strong></p><h3 id="LVS-haproxy-nginx-各个优缺点，适合哪些场合"><a href="#LVS-haproxy-nginx-各个优缺点，适合哪些场合" class="headerlink" title="LVS haproxy nginx 各个优缺点，适合哪些场合"></a><strong>LVS haproxy nginx 各个优缺点，适合哪些场合</strong></h3><p>Nginx/LVS/HAProxy的基于Linux的开源免费的负载均衡软件。</p><p>LVS：使用集群技术和Linux操作系统实现一个高性能、高可用的服务器，它具有很好的可伸缩性、可靠性和可管理性，是一款强大实用的开源软件。</p><h3 id="LVS的优点："><a href="#LVS的优点：" class="headerlink" title="LVS的优点："></a>LVS的优点：</h3><p>1：抗负载能力强、是工作在网络4层之上仅作分发之用，没有流量的产生，这个特点也决定了它在负载均衡软件里的性能最</p><p>强的，也保证了均衡器I/O的性能不会受到大流量的影响。；</p><p>2：lvs是专门的负载均衡软件，对任何应用都可以做负载均衡；</p><p>3：工作稳定，因为其本身抗负载能力很强，自身有完整的双机热备方案，目前用的比较多的是lvs+keepalived，比较大型的</p><p>用的多的是lvs+heartbeat。</p><h3 id="nginx的优点："><a href="#nginx的优点：" class="headerlink" title="nginx的优点："></a>nginx的优点：</h3><p>1：Nginx的高并发，同时能承载上万个并发连接；</p><p>2：nginx有充足的第三方功能模块的支持，主要通过upstream模块进行负载均衡；</p><p>3：nginx对网络的依赖较小，理论上只要Ping得通，网页访问正常，nginx就能连得通；</p><p>4：工作在网络的7层之上，可以针对http应用做一些分流的策略，它的正则规则比haproxy更为强大和灵活，这也是它目</p><p>前广泛流行的主要原因之一，nginx单凭这点可利用的场合就远多于lvs了。</p><h3 id="nginx的缺点："><a href="#nginx的缺点：" class="headerlink" title="nginx的缺点："></a>nginx的缺点：</h3><p>1：将Nginx当做反向代理时，负载均衡功能不是很好，对后端服务器的健康检查功能较弱；</p><p>2：nginx仅能支持http、https和email协议，这样就在适用范围上面小些，这个是它的缺点；</p><p>3：nginx只支持通过端口来检测，不支持通过url来检测。</p><h3 id="haproxy的优点："><a href="#haproxy的优点：" class="headerlink" title="haproxy的优点："></a>haproxy的优点：</h3><p>1：HAProxy的优点能够补充Nginx的一些缺点，比如支持Session的保持，Cookie的引导；同时支持通过获取指定的url</p><p>来检测后端服务器的状态；</p><p>2：haproxy也是专门的负载均衡软件，Haproxy可以负载http，还可以负载均衡mysql；</p><p>3：HAProxy是支持虚拟主机的。</p><p>总结这么多，我觉得根据不同的需求，不同的功能，可以选择不同的软件类的负载均衡软件，当然也是可以选择硬件类的负载均衡器。</p><p>像对于大型的，需要进行高并发的网站或者对网络不太严格的时候，可以使用nginx；</p><p>对于大型的Web服务器的时候可以使用haproxy；</p><p>对性能有严格要求的时候可以使用lvs，就单纯从负载均衡的角度来说，lvs也许会成为主流，更适合现在大型的互联网公司。</p><p><strong>Apache nginx lighttpd 各个优缺点，适合哪些场合</strong></p><p><strong>1. lighttpd</strong></p><p>Lighttpd是一个具有非常低的内存开销，cpu占用率低，效能好，以及丰富的模块等特点。lighttpd是众多OpenSource轻量级的web server中较为优秀的一个。支持FastCGI, CGI, Auth, 输出压缩(output compress), URL重写, Alias等重要功能。</p><p>Lighttpd使用fastcgi方式运行php,它会使用很少的PHP进程响应很大的并发量。</p><h3 id="Fastcgi的优点在于："><a href="#Fastcgi的优点在于：" class="headerlink" title="Fastcgi的优点在于："></a>Fastcgi的优点在于：</h3><p>(1)从稳定性上看, fastcgi是以独立的进程池运行来cgi,单独一个进程死掉,系统可以很轻易的丢弃,然后重新分配新的进程来运行逻辑.</p><p>(2)从安全性上看, fastcgi和宿主的server完全独立, fastcgi怎么down也不会把server搞垮,</p><p>(3)从性能上看, fastcgi把动态逻辑的处理从server中分离出来, 大负荷的IO处理还是留给宿主server, 这样宿主server</p><p>可以一心一意作IO,对于一个普通的动态网页来说, 逻辑处理可能只有一小部分, 大量的图片等静态IO处理完全不需要逻</p><p>辑程序的参与(注1)</p><p>(4)从扩展性上讲, fastcgi是一个中立的技术标准, 完全可以支持任何语言写的处理程序(php,java,python…)</p><h3 id="apache"><a href="#apache" class="headerlink" title="apache"></a><strong>apache</strong></h3><p>apache是世界排名第一的web服务器, 根据netcraft(<a href="http://www.netsraft.co.uk/" target="_blank" rel="noopener">www.netsraft.co.uk</a>)所作的调查,世界上百分之五十以上的web服务器在使用apache.</p><p>1995年4月, 最早的apache(0.6.2版)由apache group公布发行. apache group 是一个完全通过internet进行运作的非盈利机构, 由它来决定apache web服务器的标准发行版中应该包含哪些内容. 准许任何人修改隐错, 提供新的特征和将它移植到新的平台上, 以及其它的工作. 当新的代码被提交给apache group时, 该团体审核它的具体内容, 进行测试, 如果认为满意, 该代码就会被集成到apache的主要发行版中.</p><h3 id="apache-的特性"><a href="#apache-的特性" class="headerlink" title="apache 的特性:"></a>apache 的特性:</h3><p>1) 几乎可以运行在所有的计算机平台上.</p><p>2) 支持最新的http/1.1协议</p><p>3) 简单而且强有力的基于文件的配置(httpd.conf).</p><p>4) 支持通用网关接口(cgi)</p><p>5) 支持虚拟主机.</p><p>6) 支持http认证.</p><p>7) 集成perl.</p><p>8) 集成的代理服务器</p><p>9) 可以通过web浏览器监视服务器的状态, 可以自定义日志.</p><p>10) 支持服务器端包含命令(ssi).</p><p>11) 支持安全socket层(ssl).</p><p>12) 具有用户会话过程的跟踪能力.</p><p>13) 支持fastcgi</p><p>14) 支持java servlets</p><h3 id="nginx"><a href="#nginx" class="headerlink" title="nginx"></a><strong>nginx</strong></h3><p>Nginx是俄罗斯人编写的十分轻量级的HTTP服务器,Nginx，它的发音为“engine X”， 是一个高性能的HTTP和反向代理服务器，同时也是一个IMAP/POP3/SMTP 代理服务器．Nginx是由俄罗斯人 Igor Sysoev为俄罗斯访问量第二的 Rambler.ru站点开发.</p><p>Nginx以事件驱动的方式编写，所以有非常好的性能，同时也是一个非常高效的反向代理、负载平衡。其拥有匹配 Lighttpd的性能，同时还没有Lighttpd的内存泄漏问题，而且Lighttpd的mod_proxy也有一些问题并且很久没有更新。但是Nginx并不支持cgi方式运行，原因是可以减少因此带来的一些程序上的漏洞。所以必须使用FastCGI方式来执行PHP程序。</p><h3 id="nginx做为HTTP服务器，有以下几项基本特性："><a href="#nginx做为HTTP服务器，有以下几项基本特性：" class="headerlink" title="nginx做为HTTP服务器，有以下几项基本特性："></a>nginx做为HTTP服务器，有以下几项基本特性：</h3><p>处理静态文件，索引文件以及自动索引；打开文件描述符缓冲．</p><p>无缓存的反向代理加速，简单的负载均衡和容错．</p><p>FastCGI，简单的负载均衡和容错．</p><p>模块化的结构。包括gzipping, byte ranges, chunked responses,以及 SSI-filter等filter。如果由FastCGI或其它</p><p>代理服务器处理单页中存在的多个SSI，则这项处理可以并行运行，而不需要相互等待。</p><p>Nginx专为性能优化而开发，性能是其最重要的考量,实现上非常注重效率。它支持内核Poll模型，能经受高负载的考验,有报告表明能支持高达 50,000个并发连接数。</p><p>Nginx具有很高的稳定性。其它HTTP服务器，当遇到访问的峰值，或者有人恶意发起慢速连接时，也很可能会导致服务器物理内存耗尽频繁交换，失去响应，只能重启服务器。例如当前apache一旦上到200个以上进程，web响应速度就明显非常缓慢了。而Nginx采取了分阶段资源分配技术，使得它的CPU与内存占用率非常低。nginx官方表示保持10,000个没有活动的连接，它只占2.5M内存，所以类似DOS这样的攻击对nginx来说基本上是毫无用处的。就稳定性而言,nginx比lighthttpd更胜一筹。</p><p>Nginx支持热部署。它的启动特别容易, 并且几乎可以做到7*24不间断运行，即使运行数个月也不需要重新启动。你还能够在不间断服务的情况下，对软件版本进行进行升级。</p><h3 id="squid-vamish各个优缺点，适合哪些场合"><a href="#squid-vamish各个优缺点，适合哪些场合" class="headerlink" title="squid vamish各个优缺点，适合哪些场合"></a><strong>squid vamish各个优缺点，适合哪些场合</strong></h3><p>Squid是一个缓存internet数据的一个软件，它接收用户的下载申请，并自动处理所下载的数据，熟称代理。</p><p>当一个用户象要下载一个主页时，它向Squid发出一个申请，要Squid替它下载，然后Squid连接所申请网站并请求该主页，接着把该主页传给用户同时保留一个备份，当别的用户申请同样的页面时，Squid把保存的备份立即传给用户，使用户觉得速度相当快。目前，Squid 可以代理HTTP, FTP, GOPHER, SSL 和 WAIS 协议，暂不能代理POP, NNTP等协议。</p><p>Squid和vamish的比较，我了解的是在CDN的开发上。</p><p>CDN开发软件常用有Squid、Vamish、nginx、HAProxy、ATS，每种开发软件有其优缺点，如何根据性能对比来选择合适的CDN开发软件，将影响着CDN加速效果。</p><p>Squid：不能多核是硬伤，磁盘缓存容量有优势，功能多，支持ACL角色控制，支持ICP缓存协议，支持外部规则文件读取及热加载，支持热启动，典型的是网宿（网宿科技和锐网科技都是老牌的CDN服务商）</p><p>Varnish多核支持，内存缓存，性能强，功能够用，不支持集群，支持后端存活检查，不支持外部文件读取，需转义，支持热启动。</p><h3 id="raid磁盘阵列"><a href="#raid磁盘阵列" class="headerlink" title="raid磁盘阵列"></a>raid磁盘阵列</h3><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Raid0 ：最少需要两块盘， 没用冗余数据，不做备份，任何一块磁盘损坏都无法运行。n块磁盘（同类型）的阵列理论上读写速度是单块磁盘的n倍（实际达不到），风险性也是单一n倍（实际更高），是磁盘阵列中存储性能最好的。适用于安全性不高，要求比较高性能的图形工作站或者个人站。</span><br><span class="line"></span><br><span class="line">Raid1：至少需要两块盘，磁盘数量是<span class="number">2</span>的n倍，每一块磁盘要有对应的备份盘，利用率是<span class="number">50</span>%，只要有一对磁盘没有损坏就可以正常使用。n组磁盘（<span class="number">2</span>n块同类型磁盘）的阵列理论上读取速度是单块磁盘的n倍（实际达不到），风险性是单一磁盘的n分之一（实际更低）。换盘后需要长时间的镜像同步，不影响外界访问，但整个系统性能下降。磁盘控制器负载比较大。适用于安全性较高，且能较快恢复数据的场合。</span><br><span class="line"></span><br><span class="line">Raid0+<span class="number">1</span>： 至少需要四块盘，磁盘数量也是<span class="number">2</span>的n倍。既有数据镜像备份，也能保证较高的读写速度。成本比较大。</span><br><span class="line"></span><br><span class="line">Raid3：至少需要<span class="number">3</span>块盘（<span class="number">2</span>块盘没有校验的意义）。将数据存放在n+<span class="number">1</span>块盘上，有效空间是n块盘的总和，最后一块存储校验信息。数据被分割存储在n块盘上，任一数据盘出现问题，可由其他数据盘通过校正监测恢复数据（可以带伤工作），换数据盘需要重新恢复完整的校验容错信息。对阵列写入时会重写校验盘的内容，对校验盘的负载较大，读写速度相较于Raid0较慢，适用于读取多而写入少的应用环境，比如数据库和web服务器。使用容错算法和分块的大小决定了Raid3在通常情况下用于大文件且安全性要求较高的应用，比如视频编辑、硬盘播出机、大型数据库等。</span><br><span class="line"></span><br><span class="line">Raid5：至少需要<span class="number">3</span>块盘，读取速度接近Raid0，但是安全性更高。安全性上接近Raid1，但是磁盘的利用率更高。可以认为是Raid0和Raid1的一个折中方案。只允许有一块盘出错，可以通过另外多块盘来计算出故障盘的数据，故障之后必须尽快更换。比Raid0+<span class="number">1</span>的磁盘利用率高，是目前比较常用的一种方案。</span><br></pre></td></tr></table></figure></div><div><div style="padding:10px 0;margin:20px auto;width:90%;text-align:center"><div>坚持原创技术分享，您的支持将鼓励我继续创作！</div><button id="rewardButton" disable="enable" onclick='var e=document.getElementById("QR");"none"===e.style.display?e.style.display="block":e.style.display="none"'><span>打赏</span></button><div id="QR" style="display:none"><div id="wechat" style="display:inline-block"><img id="wechat_qr" src="/./images/w.jpg" alt="chen 微信支付"><p>微信支付</p></div><div id="alipay" style="display:inline-block"><img id="alipay_qr" src="/./images/a.jpg" alt="chen 支付宝"><p>支付宝</p></div></div></div></div><footer class="post-footer"><div class="post-tags"><a href="/tags/面试题/" rel="tag"><i class="fa fa-tag"></i> 面试题</a></div><div class="post-nav"><div class="post-nav-next post-nav-item"><a href="/2018/07/26/第二阶段函数背诵/" rel="next" title="函数"><i class="fa fa-chevron-left"></i> 函数</a></div><span class="post-nav-divider"></span><div class="post-nav-prev post-nav-item"><a href="/2018/07/31/mysql备份恢复/" rel="prev" title="mysql常用备份操作">mysql常用备份操作 <i class="fa fa-chevron-right"></i></a></div></div></footer></div></article><div class="post-spread"></div></div></div><div class="comments" id="comments"><div id="lv-container" data-id="city" data-uid="MTAyMC8zODMwMS8xNDgyOQ=="></div></div></div><div class="sidebar-toggle"><div class="sidebar-toggle-line-wrap"><span class="sidebar-toggle-line sidebar-toggle-line-first"></span> <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span> <span class="sidebar-toggle-line sidebar-toggle-line-last"></span></div></div><aside id="sidebar" class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">文章目录</li><li class="sidebar-nav-overview" data-target="site-overview-wrap">站点概览</li></ul><section class="site-overview-wrap sidebar-panel"><div class="site-overview"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"><p class="site-author-name" itemprop="name">chen</p><p class="site-description motion-element" itemprop="description"></p></div><nav class="site-state motion-element"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">35</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"><a href="/categories/index.html"><span class="site-state-item-count">12</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"><a href="/tags/index.html"><span class="site-state-item-count">10</span> <span class="site-state-item-name">标签</span></a></div></nav><div class="feed-link motion-element"><a href="/atom.xml" rel="alternate"><i class="fa fa-rss"></i> RSS</a></div><div class="links-of-blogroll motion-element links-of-blogroll-inline"><div class="links-of-blogroll-title"><i class="fa fa-fw fa-globe"></i> 友情链接</div><ul class="links-of-blogroll-list"><li class="links-of-blogroll-item"><a href="https://docs.mongodb.com/" title="MongoDB官方文档" target="_blank">MongoDB官方文档</a></li><li class="links-of-blogroll-item"><a href="http://www.runoob.com/python3/python3-tutorial.html" title="Python3菜鸟教程" target="_blank">Python3菜鸟教程</a></li><li class="links-of-blogroll-item"><a href="http://cloudstack-installation.readthedocs.io/zh_CN/latest/qig.html#overview" title="Cloudstack4.12教程" target="_blank">Cloudstack4.12教程</a></li><li class="links-of-blogroll-item"><a href="https://www.zabbix.com/documentation/3.4/zh/manual" title="Zabbix官方文档" target="_blank">Zabbix官方文档</a></li><li class="links-of-blogroll-item"><a href="https://heroiclee.github.io/" title="老李博客" target="_blank">老李博客</a></li></ul></div><iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width="330" height="86" src="//music.163.com/outchain/player?type=2&id=33248189&auto=1&height=66"></iframe></div></section><section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active"><div class="post-toc"><div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#2、请写出iptables语句"><span class="nav-number">1.</span> <span class="nav-text">2、请写出iptables语句</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3、Mysql高可用方案有哪些？Mysql备份方案有哪些？有什么缺点"><span class="nav-number">2.</span> <span class="nav-text">3、Mysql高可用方案有哪些？Mysql备份方案有哪些？有什么缺点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#方案一：主从或者主主半同步复制"><span class="nav-number">3.</span> <span class="nav-text">方案一：主从或者主主半同步复制</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#方案二：半同步复制优化"><span class="nav-number">4.</span> <span class="nav-text">方案二：半同步复制优化</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#优化方案三：双通道复制"><span class="nav-number">5.</span> <span class="nav-text">优化方案三：双通道复制</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1、双通道复制"><span class="nav-number">5.0.1.</span> <span class="nav-text">1、双通道复制</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2、binlog文件服务器"><span class="nav-number">5.0.2.</span> <span class="nav-text">2、binlog文件服务器</span></a></li></ol></li></ol><li class="nav-item nav-level-3"><a class="nav-link" href="#方案四：高可用架构优化"><span class="nav-number">6.</span> <span class="nav-text">方案四：高可用架构优化</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#常见方案：1、MHA-多节点集群"><span class="nav-number">6.0.1.</span> <span class="nav-text">常见方案：1、MHA+多节点集群</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#常见方案：2、zookeeper-proxy"><span class="nav-number">6.0.2.</span> <span class="nav-text">常见方案：2、zookeeper+proxy</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#方案五：共享存储"><span class="nav-number">7.</span> <span class="nav-text">方案五：共享存储</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1-SAN共享储存"><span class="nav-number">7.0.1.</span> <span class="nav-text">(1) SAN共享储存</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-DRBD磁盘复制"><span class="nav-number">7.0.2.</span> <span class="nav-text">(2) DRBD磁盘复制</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#方案六：-分布式协议"><span class="nav-number">8.</span> <span class="nav-text">方案六：** 分布式协议**</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1-MySQL-cluster"><span class="nav-number">8.0.1.</span> <span class="nav-text">(1) MySQL cluster</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-Galera"><span class="nav-number">8.0.2.</span> <span class="nav-text">(2) Galera</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3-POAXS"><span class="nav-number">8.0.3.</span> <span class="nav-text">(3) POAXS</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4、写出apache2-x的两种工作模式，以及各自的工作原理。如何查看apache当前支持的模块。并查看再哪种模式下工作。"><span class="nav-number">9.</span> <span class="nav-text">4、写出apache2.x的两种工作模式，以及各自的工作原理。如何查看apache当前支持的模块。并查看再哪种模式下工作。</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5、Linux基础问题："><span class="nav-number">10.</span> <span class="nav-text">5、Linux基础问题：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6、软件类问题"><span class="nav-number">11.</span> <span class="nav-text">6、软件类问题</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#keepalived和heartbeat的优缺点，适合哪些场合"><span class="nav-number">12.</span> <span class="nav-text">keepalived和heartbeat的优缺点，适合哪些场合</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#LVS-haproxy-nginx-各个优缺点，适合哪些场合"><span class="nav-number">13.</span> <span class="nav-text">LVS haproxy nginx 各个优缺点，适合哪些场合</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#LVS的优点："><span class="nav-number">14.</span> <span class="nav-text">LVS的优点：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#nginx的优点："><span class="nav-number">15.</span> <span class="nav-text">nginx的优点：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#nginx的缺点："><span class="nav-number">16.</span> <span class="nav-text">nginx的缺点：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#haproxy的优点："><span class="nav-number">17.</span> <span class="nav-text">haproxy的优点：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Fastcgi的优点在于："><span class="nav-number">18.</span> <span class="nav-text">Fastcgi的优点在于：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#apache"><span class="nav-number">19.</span> <span class="nav-text">apache</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#apache-的特性"><span class="nav-number">20.</span> <span class="nav-text">apache 的特性:</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#nginx"><span class="nav-number">21.</span> <span class="nav-text">nginx</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#nginx做为HTTP服务器，有以下几项基本特性："><span class="nav-number">22.</span> <span class="nav-text">nginx做为HTTP服务器，有以下几项基本特性：</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#squid-vamish各个优缺点，适合哪些场合"><span class="nav-number">23.</span> <span class="nav-text">squid vamish各个优缺点，适合哪些场合</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#raid磁盘阵列"><span class="nav-number">24.</span> <span class="nav-text">raid磁盘阵列</span></a></li></div></div></section></div></aside></div></main><footer id="footer" class="footer"><div class="footer-inner"><div class="copyright">&copy; <span itemprop="copyrightYear">2018</span> <span class="with-love" id="animate"><i class="fa fa-user"></i> </span><span class="author" itemprop="copyrightHolder">chen</span></div>#<div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动 v3.7.1</div><span class="post-meta-divider">|</span><div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://theme-next.org">NexT.Mist</a> v6.3.0</div><div class="busuanzi-count"><script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script><span class="site-uv"><i class="fa fa-user"></i> 访问用户： <span class="busuanzi-value" id="busuanzi_value_site_uv"></span> 人 </span>#<div class="powered-by"></div><span class="site-uv"><i class="fa fa-eye"></i> 访问次数： <span class="busuanzi-value" id="busuanzi_value_site_pv"></span> 次 </span><span class="site-pv"><i class="fa fa-pencil"></i> 博客全站共： <span class="post-count">62.7k</span> 字</span></div></div></footer><div class="back-to-top"><i class="fa fa-arrow-up"></i></div></div><script type="text/javascript">"[object Function]"!==Object.prototype.toString.call(window.Promise)&&(window.Promise=null)</script><script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script><script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script><script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script><script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script><script type="text/javascript" src="/js/src/utils.js?v=6.3.0"></script><script type="text/javascript" src="/js/src/motion.js?v=6.3.0"></script><script type="text/javascript" src="/js/src/scrollspy.js?v=6.3.0"></script><script type="text/javascript" src="/js/src/post-details.js?v=6.3.0"></script><script type="text/javascript" src="/js/src/bootstrap.js?v=6.3.0"></script><script type="text/javascript">!function(e,t){var n,c=e.getElementsByTagName(t)[0];"function"!=typeof LivereTower&&(n=e.createElement(t),n.src="https://cdn-city.livere.com/js/embed.dist.js",n.async=!0,c.parentNode.insertBefore(n,c))}(document,"script")</script><script type="text/javascript">function proceedsearch(){$("body").append('<div class="search-popup-overlay local-search-pop-overlay"></div>').css("overflow","hidden"),$(".search-popup-overlay").click(onPopupClose),$(".popup").toggle();var t=$("#local-search-input");t.attr("autocapitalize","none"),t.attr("autocorrect","off"),t.focus()}var isfetched=!1,isXml=!0,search_path="search.xml";0===search_path.length?search_path="search.xml":/json$/i.test(search_path)&&(isXml=!1);var path="/"+search_path,onPopupClose=function(t){$(".popup").hide(),$("#local-search-input").val(""),$(".search-result-list").remove(),$("#no-result").remove(),$(".local-search-pop-overlay").remove(),$("body").css("overflow","")},searchFunc=function(t,e,o){"use strict";$("body").append('<div class="search-popup-overlay local-search-pop-overlay"><div id="search-loading-icon"><i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i></div></div>').css("overflow","hidden"),$("#search-loading-icon").css("margin","20% auto 0 auto").css("text-align","center"),$.ajax({url:t,dataType:isXml?"xml":"json",async:!0,success:function(t){isfetched=!0,$(".popup").detach().appendTo(".header-inner");var n=isXml?$("entry",t).map(function(){return{title:$("title",this).text(),content:$("content",this).text(),url:$("url",this).text()}}).get():t,r=document.getElementById(e),s=document.getElementById(o),a=function(){var t=r.value.trim().toLowerCase(),e=t.split(/[\s\-]+/);e.length>1&&e.push(t);var o=[];if(t.length>0&&n.forEach(function(n){function r(e,o,n,r){for(var s=r[r.length-1],a=s.position,i=s.word,l=[],h=0;a+i.length<=n&&0!=r.length;){i===t&&h++,l.push({position:a,length:i.length});var p=a+i.length;for(r.pop();0!=r.length&&(s=r[r.length-1],a=s.position,i=s.word,p>a);)r.pop()}return c+=h,{hits:l,start:o,end:n,searchTextCount:h}}function s(t,e){var o="",n=e.start;return e.hits.forEach(function(e){o+=t.substring(n,e.position);var r=e.position+e.length;o+='<b class="search-keyword">'+t.substring(e.position,r)+"</b>",n=r}),o+=t.substring(n,e.end)}var a=!1,i=0,c=0,l=n.title.trim(),h=l.toLowerCase(),p=n.content.trim().replace(/<[^>]+>/g,""),u=p.toLowerCase(),f=decodeURIComponent(n.url),d=[],g=[];if(""!=l&&(e.forEach(function(t){function e(t,e,o){var n=t.length;if(0===n)return[];var r=0,s=[],a=[];for(o||(e=e.toLowerCase(),t=t.toLowerCase());(s=e.indexOf(t,r))>-1;)a.push({position:s,word:t}),r=s+n;return a}d=d.concat(e(t,h,!1)),g=g.concat(e(t,u,!1))}),(d.length>0||g.length>0)&&(a=!0,i=d.length+g.length)),a){[d,g].forEach(function(t){t.sort(function(t,e){return e.position!==t.position?e.position-t.position:t.word.length-e.word.length})});var v=[];0!=d.length&&v.push(r(l,0,l.length,d));for(var $=[];0!=g.length;){var C=g[g.length-1],m=C.position,x=C.word,w=m-20,y=m+80;0>w&&(w=0),y<m+x.length&&(y=m+x.length),y>p.length&&(y=p.length),$.push(r(p,w,y,g))}$.sort(function(t,e){return t.searchTextCount!==e.searchTextCount?e.searchTextCount-t.searchTextCount:t.hits.length!==e.hits.length?e.hits.length-t.hits.length:t.start-e.start});var T=parseInt("1");T>=0&&($=$.slice(0,T));var b="";b+=0!=v.length?"<li><a href='"+f+"' class='search-result-title'>"+s(l,v[0])+"</a>":"<li><a href='"+f+"' class='search-result-title'>"+l+"</a>",$.forEach(function(t){b+="<a href='"+f+'\'><p class="search-result">'+s(p,t)+"...</p></a>"}),b+="</li>",o.push({item:b,searchTextCount:c,hitCount:i,id:o.length})}}),1===e.length&&""===e[0])s.innerHTML='<div id="no-result"><i class="fa fa-search fa-5x" /></div>';else if(0===o.length)s.innerHTML='<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>';else{o.sort(function(t,e){return t.searchTextCount!==e.searchTextCount?e.searchTextCount-t.searchTextCount:t.hitCount!==e.hitCount?e.hitCount-t.hitCount:e.id-t.id});var a='<ul class="search-result-list">';o.forEach(function(t){a+=t.item}),a+="</ul>",s.innerHTML=a}};r.addEventListener("input",a),$(".local-search-pop-overlay").remove(),$("body").css("overflow",""),proceedsearch()}})};$(".popup-trigger").click(function(t){t.stopPropagation(),isfetched===!1?searchFunc(path,"local-search-input","local-search-result"):proceedsearch()}),$(".popup-btn-close").click(onPopupClose),$(".popup").click(function(t){t.stopPropagation()}),$(document).on("keyup",function(t){var e=27===t.which&&$(".search-popup").is(":visible");e&&onPopupClose()})</script><script type="text/javascript" src="//cdn.bootcss.com/canvas-nest.js/1.0.0/canvas-nest.min.js"></script><script type="text/javascript" src="/js/src/love.js"></script></body></html><!-- rebuild by neat -->